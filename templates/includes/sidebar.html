{% load static %}

<nav id="sidebar" class="bg-senai-red text-white fixed-top" style="width: 250px; height: 100vh; padding-top: 0;">
    
    <div class="sidebar-header text-center py-4 bg-senai-dark">
        <i class="fas fa-user-circle fa-3x mb-2 text-white"></i>
        <h5 class="fw-bold mb-0">
            {% if user.is_authenticated %}
                {{ user.first_name|default:'Usuário' }}
            {% else %}
                Visitante
            {% endif %}
        </h5>
        <small class="text-muted">
            {% if user.profile.is_secretaria %}
                Perfil: Secretária
            {% elif user.profile.is_coordenacao %}
                Perfil: Coordenador
            {% elif user.profile.is_professor %}
                Perfil: Professor
            {% else %}
                SENAI Manager
            {% endif %}
        </small>
    </div>

    <ul class="list-unstyled components p-3">
        {% if user.is_authenticated %}
            <li class="mb-1">
                <a href="#" data-bs-toggle="modal" data-bs-target="#logoutModal" class="btn btn-block text-white w-100 text-start rounded-0"><i class="fas fa-sign-out-alt me-2"></i>Sair</a>
            </li>
        {% endif %}

        {% with url_name=request.resolver_match.url_name %}

        {% if user.profile.is_secretaria %}
                <li class="mb-1">
                    <a href="{% url 'secretaria_dashboard' %}" class="btn {% if url_name == 'secretaria_dashboard' %}bg-senai-dark{% else %}btn-block{% endif %} text-white w-100 text-start rounded-0">
                        <i class="fas fa-tachometer-alt me-2"></i> Dashboard
                    </a>
                </li>
                <li class="mb-1">
                    <a href="{% url 'gestao_alunos' %}" class="btn {% if url_name == 'gestao_alunos' %}bg-senai-dark{% else %}btn-block{% endif %} text-white w-100 text-start rounded-0">
                        <i class="fas fa-user-graduate me-2"></i> Gestão de Alunos
                    </a>
                </li>
                <li class="mb-1">
                    <a href="{% url 'controle_financeiro' %}" class="btn {% if url_name == 'controle_financeiro' %}bg-senai-dark{% else %}btn-block{% endif %} text-white w-100 text-start rounded-0">
                        <i class="fas fa-dollar-sign me-2"></i> Financeiro
                    </a>
                </li>
                <li class="mb-1">
                    <a href="{% url 'gestao_documentos' %}" class="btn {% if url_name == 'gestao_documentos' %}bg-senai-dark{% else %}btn-block{% endif %} text-white w-100 text-start rounded-0">
                        <i class="fas fa-file-alt me-2"></i> Documentos
                    </a>
                </li>
                <li class="mb-1">
                    <a href="{% url 'comunicacao_secretaria' %}" class="btn {% if url_name == 'comunicacao_secretaria' %}bg-senai-dark{% else %}btn-block{% endif %} text-white w-100 text-start rounded-0">
                        <i class="fas fa-comments me-2"></i> Mensagens
                    </a>
                </li>

        {% elif user.profile.is_aluno %}
            <li class="mb-1">
                <a href="{% url 'aluno_dashboard' %}" class="btn {% if url_name == 'aluno_dashboard' %}bg-senai-dark{% else %}btn-block{% endif %} text-white w-100 text-start rounded-0">
                    <i class="fas fa-tachometer-alt me-2"></i> Dashboard
                </a>
            </li>
            <li class="mb-1">
                <a href="{% url 'boletim' %}" class="btn {% if url_name == 'boletim' %}bg-senai-dark{% else %}btn-block{% endif %} text-white w-100 text-start rounded-0">
                    <i class="fas fa-clipboard-list me-2"></i> Boletim
                </a>
            </li>
            <li class="mb-1">
                <a href="{% url 'calendario' %}" class="btn {% if url_name == 'calendario' %}bg-senai-dark{% else %}btn-block{% endif %} text-white w-100 text-start rounded-0">
                    <i class="fas fa-calendar me-2"></i> Calendário Acadêmico
                </a>
            </li>
            <li class="mb-1">
                <a href="{% url 'avisos_eventos' %}" class="btn {% if url_name == 'avisos_eventos' %}bg-senai-dark{% else %}btn-block{% endif %} text-white w-100 text-start rounded-0">
                    <i class="fas fa-bell me-2"></i> Avisos e Eventos
                </a>
            </li>
             <li class="mb-1">
                <a href="{% url 'materiais_estudo' %}" class="btn {% if url_name == 'materiais_estudo' %}bg-senai-dark{% else %}btn-block{% endif %} text-white w-100 text-start rounded-0">
                    <i class="fas fa-book me-2"></i> Materiais
                </a>
            </li>

        {% elif user.profile.is_coordenacao %}
            <li class="mb-1">
                <a href="{% url 'coordenacao_dashboard' %}" class="btn {% if url_name == 'coordenacao_dashboard' %}bg-senai-dark{% else %}btn-block{% endif %} text-white w-100 text-start rounded-0">
                    <i class="fas fa-tachometer-alt me-2"></i> Visão Geral
                </a>
            </li>
            <li class="mb-1">
                <a href="{% url 'coordenacao_desempenho' %}" class="btn {% if url_name == 'coordenacao_desempenho' %}bg-senai-dark{% else %}btn-block{% endif %} text-white w-100 text-start rounded-0">
                    <i class="fas fa-chart-line me-2"></i> Desempenho
                </a>
            </li>
            <li class="mb-1">
                <a href="{% url 'coordenacao_gestao' %}" class="btn {% if url_name == 'coordenacao_gestao' %}bg-senai-dark{% else %}btn-block{% endif %} text-white w-100 text-start rounded-0">
                    <i class="fas fa-cogs me-2"></i> Gestão
                </a>
            </li>
            <li class="mb-1">
                <a href="{% url 'coordenacao_comunicacao' %}" class="btn {% if url_name == 'coordenacao_comunicacao' %}bg-senai-dark{% else %}btn-block{% endif %} text-white w-100 text-start rounded-0">
                    <i class="fas fa-comments me-2"></i> Comunicação
                </a>
            </li>
            <li class="mb-1">
                <a href="{% url 'coordenacao_relatorios' %}" class="btn {% if url_name == 'coordenacao_relatorios' %}bg-senai-dark{% else %}btn-block{% endif %} text-white w-100 text-start rounded-0">
                    <i class="fas fa-file-pdf me-2"></i> Relatórios
                </a>
            </li>

        {% elif user.profile.is_professor %}
            <li class="mb-1">
                <a href="{% url 'professor_dashboard' %}" class="btn {% if url_name == 'professor_dashboard' %}bg-senai-dark{% else %}btn-block{% endif %} text-white w-100 text-start rounded-0">
                    <i class="fas fa-tachometer-alt me-2"></i> Dashboard
                </a>
            </li>
            <li class="mb-1">
                <a href="#" class="btn btn-block text-white w-100 text-start rounded-0">
                    <i class="fas fa-edit me-2"></i> Lance Dados
                </a>
            </li>
            <li class="mb-1">
                <a href="#" class="btn btn-block text-white w-100 text-start rounded-0">
                    <i class="fas fa-calendar-alt me-2"></i> Agenda
                </a>
            </li>
        {% endif %}
        
        {% endwith %}
    </ul>
</nav>